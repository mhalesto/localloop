<!DOCTYPE html>
<html>
<head>
    <title>Grant Admin Access</title>
</head>
<body>
    <h1>Granting Admin Access...</h1>
    <div id="result"></div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFunctions, httpsCallable } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-functions.js';

        const firebaseConfig = {
            apiKey: "AIzaSyD9ngUn2O-_TYYzPfEQpDcuNvv-aAMUcIY",
            authDomain: "share-your-story-1.firebaseapp.com",
            projectId: "share-your-story-1",
            storageBucket: "share-your-story-1.firebasestorage.app",
            messagingSenderId: "673056432219",
            appId: "1:673056432219:web:8d54e53d9124fb6e441f7e",
            measurementId: "G-75VDYJHL88"
        };

        const app = initializeApp(firebaseConfig);
        const functions = getFunctions(app);

        async function grantAdmin() {
            const resultDiv = document.getElementById('result');

            try {
                const setAdminClaim = httpsCallable(functions, 'setAdminClaim');
                const result = await setAdminClaim({
                    email: 'currenttech.co.za@gmail.com',
                    secretKey: 'localloop-admin-setup-2025'
                });

                resultDiv.innerHTML = `
                    <h2 style="color: green;">✅ Success!</h2>
                    <p>${result.data.message}</p>
                    <p>User ID: ${result.data.uid}</p>
                    <h3>Next Steps:</h3>
                    <ol>
                        <li>Go to the admin dashboard</li>
                        <li>Log out if already logged in</li>
                        <li>Log back in with currenttech.co.za@gmail.com</li>
                        <li>You'll now have full admin access!</li>
                    </ol>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <h2 style="color: red;">❌ Error</h2>
                    <p>${error.message}</p>
                `;
            }
        }

        grantAdmin();
    </script>
</body>
</html>
